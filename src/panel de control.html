<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control</title>
    <link rel="stylesheet" href="css/panel de control.css">

</head>
<body>
    <div class="main-container">
        <div class="sidebar">
            <div class="admin-icon">
                <i class="fas fa-user-circle"></i>
                <span>Administrador</span>
            </div>
            <h2>Panel de Control</h2>
            <button onclick="toggleSection('capturaHoras')"><i class="fas fa-clock"></i>Captura Horas</button>
            <button onclick="toggleSection('reportes')"><i class="fas fa-chart-line"></i>Reportes</button>
            <button onclick="toggleSection('alertas')"><i class="fas fa-exclamation-triangle"></i>Alertas</button>
            <button onclick="toggleSection('historial')"><i class="fas fa-history"></i>Historial</button>
            <a href="inicio de sesion.html">
                <button><i class="fas fa-sign-out-alt"></i>Regresar</button>
            </a>
        </div>

        <div class="content">
            <div id="capturaHoras" class="section-box">
                <h3>Captura de Horas de Ingreso y Salida</h3>
                <div class="hora-container">
                    <div class="hora-input">
                        <label for="horaIngreso">Hora de Ingreso:</label>
                        <input type="datetime-local" id="horaIngreso">
                    </div>
                    <div class="hora-input">
                        <label for="horaSalida">Hora de Salida:</label>
                        <input type="datetime-local" id="horaSalida">
                    </div>
                </div>
                <button class="register" onclick="registrarHoras()">Registrar Horas</button>
                <div id="mensajeExitoso">Captura de hora exitosa</div>
            </div>

            <div id="reportes" class="section-box">
                <h3>Generación de Reportes</h3>
                <p>Aquí podrás generar reportes detallados basados en los registros.</p>
            </div>

            <div id="alertas" class="section-box">
                <h3>Alertas Importantes</h3>
                <p>Aquí se mostrarán las alertas importantes.</p>
            </div>

            <div id="historial" class="section-box">
                <h3>Historial de Registros</h3>
                <table id="historialLista" class="historial-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Hora de Ingreso</th>
                            <th>Hora de Salida</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let registros = [];

        function formatearFechaHoraLocal(fechaHora) {
            const opciones = {
                timeZone: 'America/Bogota',
                year: 'numeric', month: '2-digit', day: '2-digit',
                hour: '2-digit', minute: '2-digit',
                hour12: true
            };
            return new Date(fechaHora).toLocaleString('es-CO', opciones);
        }

        function registrarHoras() {
            const horaIngreso = document.getElementById('horaIngreso').value;
            const horaSalida = document.getElementById('horaSalida').value;

            if (horaIngreso && horaSalida) {
                const fechaIngreso = formatearFechaHoraLocal(horaIngreso);
                const fechaSalida = formatearFechaHoraLocal(horaSalida);

                registros.push({ fecha: new Date().toLocaleDateString('es-CO'), ingreso: fechaIngreso, salida: fechaSalida });
                document.getElementById('horaIngreso').value = '';
                document.getElementById('horaSalida').value = '';

                const mensajeExitoso = document.getElementById('mensajeExitoso');
                mensajeExitoso.style.display = 'block';
                setTimeout(() => { mensajeExitoso.style.display = 'none'; }, 3000);
                actualizarHistorial();
            } else {
                alert('Por favor, ingresa ambas horas.');
            }
        }

        function actualizarHistorial() {
            const tbody = document.querySelector('#historialLista tbody');
            tbody.innerHTML = '';
            registros.forEach(registro => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${registro.fecha}</td>
                    <td>${registro.ingreso}</td>
                    <td>${registro.salida}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function toggleSection(sectionId) {
            document.querySelectorAll('.section-box').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        window.onload = () => {
            toggleSection('capturaHoras');
        };
    </script>
</body>
</html>